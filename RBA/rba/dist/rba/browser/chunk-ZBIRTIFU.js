import{a as c}from"./chunk-ZJ2MK45D.js";import{e as d,f as o,h as u,i as a,k as h,l as m}from"./chunk-B4T3Z6GG.js";var b=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function y(e){let t=parseInt(e.getAttribute("tabindex"),10);return Number.isNaN(t)?/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)?0:e.tabIndex:t}function p(e){return!(e.disabled||e.ariaHidden==="true"||e.tagName==="INPUT"&&e.type==="hidden"||v(e))}var v=function(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;let n=function(r){return e.ownerDocument.querySelectorAll('input[type="radio"][name="'+r+'"]')}(e.name),i=x(n,e.form);return!(!i||i===e)},x=function(e,t){for(let n=0;n<e.length;n++)if(e[n].checked&&e[n].form===t)return e[n]},g=function(e){let t=[],n=[];return e.getAttributeNode?(Array.from(e.querySelectorAll(b)).forEach((i,r)=>{let s=y(i);s===-1||!p(i)||(s===0?t.push(i):n.push({documentOrder:r,tabIndex:s,node:i}))}),n.sort((i,r)=>i.tabIndex===r.tabIndex?i.documentOrder-r.documentOrder:i.tabIndex-r.tabIndex).map(i=>i.node).concat(t)):[]},f=({id:e,ref:t,onFocus:n})=>o("div",{id:e,ref:t,tabindex:"0","aria-hidden":"true",onFocus:i=>n&&n(i)}),l=class{constructor(t,n){this.tababbleNodes=[],t&&(this.tababbleNodes=g(t)),this.startWrap=n}onStartWrapFocus(){var t;!((t=this.tababbleNodes)===null||t===void 0)&&t.length&&this.tababbleNodes[0].focus()}onEndWrapFocus(){this.startWrap.focus()}},C='@import url("https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700");.modus-modal{align-items:center;background-color:var(--modus-modal-backdrop-bg, rgba(37, 42, 46, 0.7490196078));font-size:0.875rem;height:100%;justify-content:center;left:0;overflow:auto;position:fixed;top:0;width:100%}.modus-modal.visible{display:inline-flex}.modus-modal.hidden{display:none}.modus-modal .content{background-color:var(--modus-modal-bg, #fff);border:1px solid var(--modus-modal-border-color, rgba(0, 0, 0, 0.2));border-radius:0.25rem;color:var(--modus-modal-color, #252a2e);display:flex;fill:var(--modus-modal-color, #252a2e);flex-direction:column;justify-content:center;max-width:650px;min-width:300px;outline:0}.modus-modal .content header{align-items:center;border-bottom:1px solid var(--modus-modal-divider-color, #e0e1e9);display:flex;font-size:1rem;font-weight:700;height:64px;justify-content:space-between;padding:0 1rem}.modus-modal .content header .icon-close{cursor:pointer}.modus-modal .content header .icon-close path{fill:var(--modus-modal-close-color, #252a2e)}.modus-modal .content header .icon-close:hover path{opacity:var(--modus-modal-close-hover-opacity, 0.75)}.modus-modal .content .body{height:auto;padding:1rem}.modus-modal .content footer{border-top:1px solid var(--modus-modal-divider-color, #e0e1e9);padding:1.25rem 1rem}.modus-modal .content footer.has-buttons{align-items:center;display:flex;gap:0.5rem;justify-content:flex-end}.modus-modal.fullscreen{overflow:hidden}.modus-modal.fullscreen .content{height:calc(100% - 64px);max-width:none;width:calc(100% - 64px)}.modus-modal.fullscreen .content .body{flex-grow:1}',w=C,k=class{constructor(e){m(this,e),this.closed=a(this,"closed",7),this.opened=a(this,"opened",7),this.primaryButtonClick=a(this,"primaryButtonClick",7),this.secondaryButtonClick=a(this,"secondaryButtonClick",7),this.ignoreOverlayClick=!1,this.ariaLabel=void 0,this.headerText=void 0,this.primaryButtonAriaLabel=void 0,this.primaryButtonDisabled=void 0,this.primaryButtonText=void 0,this.secondaryButtonAriaLabel=void 0,this.secondaryButtonDisabled=void 0,this.secondaryButtonText=void 0,this.zIndex="1",this.backdrop="default",this.fullscreen=!1,this.visible=void 0}close(){return d(this,null,function*(){return this.visible=!1,this.closed.emit(),Promise.resolve()})}open(){return d(this,null,function*(){return this.visible=!0,this.opened.emit(),Promise.resolve()})}handleModalContentMouseDown(){this.ignoreOverlayClick=!0}documentKeyHandler(e){e.code.toUpperCase()==="ESCAPE"&&this.close()}handleOverlayClick(e){switch(this.backdrop){case"static":return;case"default":if(this.ignoreOverlayClick||!e.target.classList.contains("overlay")){this.ignoreOverlayClick=!1;return}this.close()}}handleEnterKeydown(e,t){switch(e.code){case"Enter":t();break}}handleCloseKeydown(e){this.handleEnterKeydown(e,()=>this.close())}handlePrimaryKeydown(e){this.handleEnterKeydown(e,()=>this.primaryButtonClick.emit())}handleSecondaryKeydown(e){this.handleEnterKeydown(e,()=>this.secondaryButtonClick.emit())}componentDidRender(){this.modalContentRef&&this.startTrapRef&&(this.focusWrapping=new l(this.modalContentRef,this.startTrapRef))}renderModal(){return o("div",{class:"content",ref:e=>this.modalContentRef=e,onMouseDown:()=>this.handleModalContentMouseDown()},o(f,{id:"startTrap",ref:e=>this.startTrapRef=e,onFocus:()=>{var e;return(e=this.focusWrapping)===null||e===void 0?void 0:e.onStartWrapFocus()}}),this.renderModalHeader(),o("div",{class:"body"},o("slot",null)),this.renderModalFooter(),o(f,{id:"endTrap",onFocus:()=>{var e;return(e=this.focusWrapping)===null||e===void 0?void 0:e.onEndWrapFocus()}}))}renderModalHeader(){return o("header",null,this.headerText,o("div",{role:"button",tabindex:0,"aria-label":"Close",onClick:()=>this.close(),onKeyDown:e=>this.handleCloseKeydown(e)},o(c,{size:"20"})))}renderModalFooter(){return o(h,null,o("footer",{class:{"has-buttons":!!(this.primaryButtonText||this.secondaryButtonText)}},this.secondaryButtonText&&o("modus-button",{disabled:this.secondaryButtonDisabled,"button-style":"outline",color:"secondary",ariaLabel:this.secondaryButtonAriaLabel,onButtonClick:()=>this.secondaryButtonClick.emit(),onKeyDown:e=>this.handlePrimaryKeydown(e)},this.secondaryButtonText),this.primaryButtonText&&o("modus-button",{disabled:this.primaryButtonDisabled,color:"primary",ariaLabel:this.primaryButtonAriaLabel,onButtonClick:()=>this.primaryButtonClick.emit(),onKeyDown:e=>this.handleSecondaryKeydown(e)},this.primaryButtonText),o("slot",{name:"footerContent"})))}render(){return o("div",{key:"5d1ba92884aae3cb2520fefb3c056d2dbcfcb3e4","aria-hidden":this.visible?void 0:"true","aria-label":this.visible&&this.ariaLabel||void 0,"aria-modal":this.visible?"true":void 0,class:`modus-modal ${this.fullscreen?"fullscreen":""} overlay ${this.visible?"visible":"hidden"}`,onClick:e=>this.handleOverlayClick(e),role:this.visible?"dialog":void 0,style:{zIndex:this.zIndex}},this.renderModal())}get el(){return u(this)}};k.style=w;export{k as modus_modal};
