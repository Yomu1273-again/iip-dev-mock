import{a as w}from"./chunk-5QQJGTSA.js";import{f}from"./chunk-XTQG4GE2.js";import"./chunk-JYMW3IJD.js";import"./chunk-BAADNOCP.js";import"./chunk-4FSMAT34.js";import"./chunk-COIZAV6I.js";import{e as c,f as n,h as y,i as r,l as S}from"./chunk-B4T3Z6GG.js";var D='@import url("https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700");.tree-item{align-items:center;background-color:var(--modus-tree-view-item-bg, #fff);border:0.0625rem solid var(--modus-tree-view-item-border-color, #e0e1e9);color:var(--modus-tree-view-item-color, #252a2e);cursor:pointer;display:flex;fill:var(--modus-tree-view-item-color, #252a2e);flex-direction:row;font-family:"Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";font-size:1rem;justify-content:space-between;min-height:2.375rem;width:100%}.tree-item svg path{fill:var(--modus-tree-view-item-color, #252a2e)}.tree-item .icon-chevron-right-thick path,.tree-item .icon-chevron-down-thick path{fill:var(--modus-chevron-color, #90939f)}.tree-item.borderless{border:none}.tree-item.disabled{color:var(--modus-tree-view-item-disabled-color, rgba(37, 42, 46, 0.3019607843));cursor:default !important}.tree-item.disabled svg path{fill:var(--modus-tree-view-item-disabled-color, rgba(37, 42, 46, 0.3019607843))}.tree-item.drop-allow{box-shadow:0 -2px 0 var(--modus-tree-view-item-drag-border-color, #217cbb) !important}.tree-item.drop-block{box-shadow:0 -2px 0 var(--modus-tree-view-item-drag-error-border-color, #da212c) !important}.tree-item .d-none{display:none !important}.tree-item .hidden{visibility:hidden}.tree-item:hover:not(.disabled){background-color:var(--modus-tree-view-item-hover-bg, #e0e1e9)}.tree-item .icon-slot{align-items:center;display:flex;justify-content:center;margin-left:0.3rem;width:1.5rem}.tree-item .icon-slot.drag-icon{cursor:grab !important;width:1rem}.tree-item .icon-slot.drag-icon svg{height:1rem;width:1rem}.tree-item .icon-slot .inline-flex{display:inline-flex}.tree-item .icon-slot .rotate-right{transform:rotate(-90deg)}.tree-item .label-slot{overflow:hidden;padding-left:0.5rem;padding-right:0.5rem;text-overflow:ellipsis;white-space:nowrap;width:100%}.tree-item.large{min-height:2.875rem}.tree-item.selected{background-color:var(--modus-tree-view-item-selected-bg, #dcedf9);border-color:var(--modus-tree-view-item-selected-border-color, #dcedf9)}.tree-item.small{font-size:0.75rem;min-height:1.875rem}.tree-item-container{display:flex;flex-direction:column;position:relative}.tree-item-container.selected-indicator::before{box-shadow:inset 0.3rem 0 0 0 var(--modus-tree-view-item-selected-indicator-color, #217cbb);content:"";height:100%;left:0;position:absolute;right:0;width:0.3rem;z-index:5}.tree-item-group{display:none;margin:0;padding:0;width:100%}.tree-item-group.expanded{display:block}.tree-item.is-children{border-bottom:none;border-top:none}.tree-item.expanded{border-bottom:none}.tree-item.is-last-child{border-bottom:0.0625rem solid var(--modus-tree-view-item-border-color, #e0e1e9)}',E=D,L=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,s=Object.getOwnPropertySymbols(e);d<s.length;d++)t.indexOf(s[d])<0&&Object.prototype.propertyIsEnumerable.call(e,s[d])&&(i[s[d]]=e[s[d]]);return i},O=class{constructor(e){S(this,e),this.checkboxClick=r(this,"checkboxClick",7),this.itemLabelChange=r(this,"itemLabelChange",7),this.itemClick=r(this,"itemClick",7),this.itemExpandToggle=r(this,"itemExpandToggle",7),this.itemAdded=r(this,"itemAdded",7),this.actionClick=r(this,"actionClick",7),this.SLOT_COLLAPSE_ICON="collapseIcon",this.SLOT_DRAG_ICON="dragIcon",this.SLOT_EXPAND_ICON="expandIcon",this.SLOT_ITEM_ICON="itemIcon",this.SLOT_LABEL="label",this.CustomSlot=t=>{var{name:i,className:s,defaultContent:d,display:a=!0}=t,l=L(t,["name","className","defaultContent","display"]);let m=!this.slots.has(i)&&d;return n("div",Object.assign({},l,{class:`${s||""} ${a?"":"d-none"}`}),n("slot",{name:i,onSlotchange:()=>this.handleDefaultSlotChange()}),m&&d)},this.disabled=void 0,this.draggableItem=void 0,this.droppableItem=void 0,this.editable=void 0,this.label=void 0,this.nodeId=void 0,this.tabIndexValue=0,this.actions=void 0,this.isLastChild=void 0,this.isExpanded=void 0,this.isChildren=void 0,this.childrenIds=void 0,this.forceUpdate={},this.slots=new Map}handleActionBarClick(e){let t=e.detail.actionId;this.actionClick.emit({actionId:t}),e.stopPropagation(),e.preventDefault()}connectedCallback(){this.options&&this.options.onItemAdd(this.element)}componentDidRender(){this.refLabelInput&&this.editable&&this.refLabelInput.focusInput(),this.element.querySelectorAll("modus-tree-view-item").forEach(t=>{t.setChildren()})}setChildren(){return c(this,null,function*(){this.isChildren=!0})}componentWillLoad(){this.itemAdded.emit(this.element),this.handleDefaultSlotChange()}disconnectedCallback(){var e;(e=this.options)===null||e===void 0||e.onItemDelete(this.nodeId)}focusItem(){return c(this,null,function*(){this.refItemContent.focus()})}focusCheckbox(){return c(this,null,function*(){this.refCheckbox&&this.refCheckbox.focusCheckbox()})}getChildrenIds(){return Array.from(this.element.children).map(e=>e.nodeId).filter(e=>e)}handleCheckboxClick(e){if(this.shouldHandleEvent(e)){let{onCheckboxSelection:t,hasItemChecked:i}=this.options;t(this.nodeId),this.checkboxClick.emit(i(this.nodeId))}}handleDefaultKeyDown(e,t){switch(e.code){case"Space":case"Enter":t(),e.preventDefault();break}}handleDefaultSlotChange(){let e=this.element.querySelectorAll("[slot]"),t=new Map,i=e.length!==this.slots.size;e.forEach(s=>{t.set(s.slot,!0),i=!this.slots.get(s.slot)||i}),i&&(this.slots=new Map(t))}handleDrag(e){if(this.shouldHandleEvent(e)){e.preventDefault();let t=this.refItemContent.cloneNode(!0);this.options.onItemDrag(this.nodeId,t,e)}}handleDragKeyDown(e){let t=this.refItemContent.cloneNode(!0);this.options.onItemDragClick(this.nodeId,t,e)}handleExpandToggle(e){if(this.shouldHandleEvent(e)){let{onItemExpandToggle:t,hasItemExpanded:i}=this.options;t(this.nodeId),this.isExpanded=i(this.nodeId),this.itemExpandToggle.emit(i(this.nodeId))}}handleFocus(){let{onItemFocus:e,hasItemFocus:t}=this.options||{};t(this.nodeId)||e(this.nodeId)}handleItemClick(e){if(!e.defaultPrevented&&this.shouldHandleEvent(e)){let{onItemSelection:t,hasItemSelected:i}=this.options;t(this.nodeId,e),this.itemClick.emit(i(this.nodeId))}}handleKeyDownTreeItem(e){if(!e.defaultPrevented)switch(e.code){case"Space":this.handleExpandToggle(e),e.preventDefault(),e.stopPropagation();break;case"Enter":this.draggableItem||(this.handleItemClick(e),e.stopPropagation());break}}handleLabelInputClick(e){e.stopPropagation()}handleLabelInputBlur(){this.updateLabelInput()}handleLabelInputKeyDown(e){switch(e.code){case"Enter":e.preventDefault(),this.itemLabelChange.emit(this.refLabelInput.value),this.updateLabelInput();break}}handlePropDisabledChange(e){var t;(t=this.options)===null||t===void 0||t.onItemUpdate({nodeId:this.nodeId,disabled:e})}handlePropNodeIdChange(e,t){var i;(i=this.options)===null||i===void 0||i.onItemUpdate({nodeId:e},{nodeId:t})}handleRefItemContent(e){var t;this.refItemContent=e,(t=this.options)===null||t===void 0||t.onItemUpdate({nodeId:this.nodeId,content:e})}handleTreeSlotChange(){var e,t;let i=this.getChildrenIds(),s=this.childrenIds&&i?this.childrenIds.length!==i.filter(d=>this.childrenIds.includes(d)).length:((e=this.childrenIds)===null||e===void 0?void 0:e.length)!==i?.length;if(this.options){let{onItemUpdate:d,multiCheckboxSelection:a,onCheckboxSelection:l}=this.options;d({nodeId:this.nodeId,children:[...i]}),!((t=this.childrenIds)===null||t===void 0)&&t.length&&this.childrenIds.length!==i?.length&&a&&l(this.nodeId,!0)}this.childrenIds=s?[...i]:this.childrenIds}initTreeViewItem(e){return c(this,null,function*(){this.options=Object.assign({},e),this.handleTreeSlotChange(),this.updateComponent(),this.tabIndexValue=this.options.disableTabbing?-1:this.tabIndexValue})}rootOptions(){var e;if(this.options){let{checkboxSelection:t,multiCheckboxSelection:i,showSelectionIndicator:s,size:d,borderless:a,getLevel:l,hasItemSelected:m,hasItemDisabled:I,hasItemIndeterminate:p,hasItemExpanded:g,hasItemChecked:h}=this.options,C=m(this.nodeId),v=h(this.nodeId),u=p(this.nodeId),b=g(this.nodeId),x=l(this.nodeId),k=I(this.nodeId),o=s(this.nodeId);return{selected:C,checked:v,indeterminate:u,expanded:b,expandable:!!(!((e=this.childrenIds)===null||e===void 0)&&e.length),level:x,checkboxSelection:t,multiCheckboxSelection:i,size:d,borderless:a,isDisabled:k,selectionIndicator:o}}else return{level:1}}shouldHandleEvent(e){return e&&e.stopPropagation(),this.options&&!this.options.hasItemDisabled(this.nodeId)}updateComponent(){return c(this,null,function*(){this.forceUpdate=Object.assign({},this.forceUpdate)})}updateLabelInput(){this.refLabelInput&&(this.label=this.refLabelInput.value),this.refLabelInput=null,this.editable=!1}render(){var e;let{selected:t,checked:i,indeterminate:s,expanded:d,expandable:a,level:l,checkboxSelection:m,multiCheckboxSelection:I,size:p,borderless:g,isDisabled:h,selectionIndicator:C}=this.rootOptions(),v=Object.assign(Object.assign({"aria-level":l,"aria-selected":t?"true":"false","aria-disabled":h?"true":"false"},a?{"aria-expanded":d?"true":"false"}:{}),{role:"treeitem"}),u=`${w.get(p||"standard")}`,b=h?-1:this.tabIndexValue,x=`tree-item ${this.isExpanded?"expanded":""} ${this.isChildren?"is-children":""} ${this.isLastChild&&!this.isExpanded?"is-last-child":""}${t?"selected":""} ${u} ${h?"disabled":""} ${g?"borderless":""}`,k=`tree-item-group ${u} ${d?"expanded":""}`;return n("li",Object.assign({key:"87165001431895774c2bbe48c2a85c56c913f115"},v,{class:`tree-item-container${C?" selected-indicator":""}`}),n("div",{key:"2f12d166fbbe3735651fec2af809723a9d3993cf",class:x,onFocus:()=>this.handleFocus(),onClick:o=>this.handleItemClick(o),onKeyDown:o=>this.handleKeyDownTreeItem(o),ref:o=>this.handleRefItemContent(o),tabindex:b},n(this.CustomSlot,{key:"544067c64d2cfa6f7c933c3dc681b862a418ba6e",className:`icon-slot drag-icon${this.draggableItem?"":" hidden"}`,defaultContent:n(f,{icon:"drag_indicator"}),name:this.SLOT_DRAG_ICON,tabIndex:0,onKeyDown:o=>this.handleDragKeyDown(o),onMouseDown:o=>this.handleDrag(o)}),n("div",{key:"64e1af6b2432aa6d9f87b31dcdd0c4b7d8c1e011","aria-disabled":"true",style:{paddingLeft:`${(l-1)*.5}rem`}}),n("div",{key:"468f36199d8bccce894b61497925353660d0ed7f",class:`icon-slot${a?"":" hidden"}`,onClick:o=>this.handleExpandToggle(o),onKeyDown:o=>this.handleDefaultKeyDown(o,()=>this.handleExpandToggle(o)),tabindex:a?b:-1},n(this.CustomSlot,{key:"239a9afcc107b35d07753a660f5be23562511446",className:"inline-flex rotate-right",defaultContent:n(f,{icon:"expand_more",size:"24"}),display:!d,name:this.SLOT_EXPAND_ICON}),n(this.CustomSlot,{key:"cc598195b05ef8d811709fea44b6affa93b5b6db",className:"inline-flex",defaultContent:n(f,{icon:"expand_more",size:"24"}),display:d,name:this.SLOT_COLLAPSE_ICON})),(m||I)&&n("div",{class:"icon-slot"},n("modus-checkbox",{checked:i,disabled:h,indeterminate:s,onClick:o=>this.handleCheckboxClick(o),onKeyDown:o=>this.handleDefaultKeyDown(o,()=>this.handleCheckboxClick(o)),ref:o=>this.refCheckbox=o})),n(this.CustomSlot,{key:"86d4e37b913e99569216ba4cdf46efd7a1dc4155",className:"icon-slot",name:this.SLOT_ITEM_ICON,display:this.slots.has(this.SLOT_ITEM_ICON)}),n("div",{key:"6ea867fb583e31cc6ba6b3368f1f4c701d71f048",role:"heading","aria-level":l,class:"label-slot"},n(this.CustomSlot,{key:"98658ee52fd64362f5c4c418e39d51e321b6cf3c",role:"button",name:this.SLOT_LABEL,defaultContent:this.editable?n("modus-text-input",{size:p=="large"?"large":"medium",autoFocusInput:!0,tabindex:0,ref:o=>this.refLabelInput=o,value:this.label,onClick:o=>this.handleLabelInputClick(o),onBlur:()=>this.handleLabelInputBlur(),onKeyDown:o=>this.handleLabelInputKeyDown(o)}):this.label})),((e=this.actions)===null||e===void 0?void 0:e.length)>0&&n("modus-action-bar",{"visible-item-count":3,actions:this.actions})),n("ul",{key:"7ca259e728642481cf342134ed69ad4d1455dbce",class:k,role:"tree"},n("slot",{key:"ef2d1f930c3f96d79f8f66371add710b10fcd1bc",onSlotchange:()=>this.handleTreeSlotChange()})))}get element(){return y(this)}static get watchers(){return{disabled:["handlePropDisabledChange"],nodeId:["handlePropNodeIdChange"]}}};O.style=E;export{O as modus_tree_view_item};
